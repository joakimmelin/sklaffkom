V1.33 beta9a Saturday 27 September 2025 PL
* This is the version we're shipping to github, after a day or so trying
  figure out why inews did not work on FreeBSD anymore :D. Should be fixed
  now, and I can move on to beta10 :).

v1.33 beta 9 Thursday 25 September 2025 PL
Yet another session at the hospital :
* new function display_logout displays etc/logout during logout.
  logout.swe and logout.eng for multilingual systems.
  display_news moved to helpers.c to keep original codebase tidy.
* new function clear_screen - more robust handling of clear_screen
  available outside of commands.c.
* safer logging in admin.c - prevents segfault when user permissions
  are wrong
* The command "Börja om" has probably never worked since there was no
  logic for handling restarts in sklaffkom.c at all. Now there is, and
  "Börja om" should work as intended.
* improved display_langfile, should now always display correct language
* CRUCIAL FIX : Proper logout sequence displaying hayes commands like
  in the good old days. Also in sklaffact now, first impression last.
* New command "Clear" same as "Cls" to avoid confusion amongst us
  Linux-freaks.
* Small tweaks to the file_exists function, mostly to keep compiler
  happier in 2025.
* lib/sys_error.c rewritten due to causing havoc while modifying other
  functions (forgot which ones)
* Makefile improvement : mailtoss and newstoss copied to SKLAFFBIN
  instead of hardcoded /usr/local/bin (my bad)
* More "junk" (my own code) moved to lib/helpers.c to keep the original
  codebase as original as possible. This work will continue.
* Serious sklaffrc bug fixed where numlines was written to the wrong file
  (still worked though, just missing a /).
* display_header moved to helpers.c after a heroic ctrl-v adventure 
  with lost curly braces. Found and restored. All curly braces are well.
* The hayes modem emulation is now displayed during logout only, not
  during restart (which would defeat the purpose)

v1.33 beta 8 Wednesday 24 September 2025 PL
* Serious bug introduced by me where caller didn't see text body unless
  ansi was turned on. Now fixed.

v1.33 beta 7 Tuesday 16 September 2025 PL
* Safer handling of uploads (directory is created if it doesn't exist for
  some reason)
* Small fix that I can't remember to keep compiler on FreeBSD happy

v.133 beta 6, Monday 15 September 2025 PL
* Realized -werror wasn't turned on, received warnings in /lib/rawio.c,
  did some slight modernizations to the open_file-function which caused
  a domino-effect so lib/rawio.c needed work as well. We should be good
  now! :D (Still haven't tested in FreeBSD but I hope it works).
  Being hospitalized (bad hernia) makes you productive, should try this
  more often!

v1.33 beta 5, Monday 15 September 2025 PL
* Further improvements to (Se) tiden (hard coded language strings removed)
* /usr/local/sklaff/etc/news is now multilingual - more to follow
  (to use this feature, add two new files in /usr/local/sklaff/etc :
  news.eng
  news.swe
  Now English users will se news.eng, and vice versa
  As a fallback, the already existing file "news" will be displayed
* While doing this, further modernization to open_file in lib/rawio.c
  was made, and old obsolete code was removed. There's more work to be
  done in this file one day :D

v1.33 beta 4, Monday 15 September 2025 PL
* Critical language bugfixes (so now the English version compiles also ;))
* Mailtoss.c no longer deletes "spool file", instead trunctates
* We can now play Zork 1,2,3 
* More ANSI colors, in Usenet posts and other places
* Usenet posts now show date when written instead of import date
* Work has begun on a friendlier "(Se) tiden" command (not finished)
* cmd_where has friendlier output also
* Probably a dozen small fixes and tweaks that I have forgot
* All SIGNAL messages fixed (no more '((')

v1.33 beta 3, Thursday August 21 2025 PL
* Help files hopefully works for commands with more than one
	  underscore now (a 30 year old bug finally fixed?)

2025-08-20 Merged old and new changelog into this file. // JM

v1.33 beta 2, Tuesday August 18 2025 PL

New features :
=============

* UTF-8 is supported and activated with a flag
* Nicer prompt (in my opinion) - can now be changed in sklaff.h 
  (#define PROMPT).
* The screen length should now be detected automatically, and the setting 
  is retained session out. If this doesn't work, there is also a new command :
* New command - Ändra skärmlängd (current installations needs a copy of
  /etc/parse.eng and /etc/parse.swe to /usr/local/sklaff/etc, as well as 
  the help files "mod_numlines" for each language. (Nethack is also among 
  the help files now btw).
* Colors are supported via a new flag (ANSI), however, the coloring is not 
  nearly finished (work in progress)

Bug fixes:

* Quoting usenet posts now works (I think).
* Mailtoss now understands that the spool is often empty and no longer logs 
  that "error".
* Makefile now also copies newstoss and mailtoss to /usr/local/bin so you 
  don't forget it.
* Makefile: "make distrib" updated to modern standard, creates dist files in 
  the ./dist directory. Good to have when you want to test run outside of 
  github ;).
* Shows the correct number of texts in "list meetings" in mailbox and meetings.
* A couple of small fixes in the English version.
* The bbs no longer "crashes" if the .plan file is missing.
* We now create usenet header in outgoing mail in a more robust way to avoid 
  errors in inews.
* Fixed a bug I introduced myself because the compiler complained about unused 
  variables if news posting was turned off.
* Replace conf sometimes gave a segfault when emailing users outside of 
  sklaffkom, now fixed.

Other:

* updated the version number to 1.33-beta2.
* Shows real name in usenet header and "footer" (when that info is available, 
  which is most of the times, if not fallback to old behaviour)
* Strips unnecessary characters in the author's name on usenet posts.
* Decodes "=?UTF-8?B?...?=...." strings in name and subject on usenet posts
  (most of the times, there's still work to be done here).
* Endless number of small fixes now allow us to keep "-werror" even when 
  compiling on linux.
* A number of fixes that prevent segfaults and instead show reasonable 
  error messages.
------

Sat Jan 11 17:01:21 1997  Olof Runborg  <olofr@c2m2-12.nada.kth.se>

	* survreport.c (argv): 

	* Fixed a bug in the file locking. Under SOLARIS files
	were not locked properly, which e.g. resulted in a loss of
	survey replies when two users took the same survey at
	the same time. Question mark remains as to whether the 
	file locking works under Linux.

	* Made some minor changes in the handling of the
	at command (for survey reports).

	* Added code in survreport.c to change ownership
	and group of survey reports.

Thu Jan  9 15:58:01 1997  Olof Runborg  <olofr@c2m2-12.nada.kth.se>

	* Version 1.28 released.

	* edit.c (mailrec;): Added help text for surveys.

	* survreport.c (argv): New separate program that
	reports surveys. Moved summary information report
	to this program. Handle survery reporting via at
	command.

	* During readsome and readall, users are not prompted
	for survey replies.

Sat Jan  4 20:30:41 1997  Olof Runborg  <olofr@c2m2-12.nada.kth.se>

	* sklaffadm.c (argv): Exclude surveys when the sklaffadm
	'purge' command is run. Surveys are not deleted.

	Earlier: 

	- Fixed a bug that crashed the system when very
	  long mail addresses were used.
	- Added the "result" command for displaying full
	  survey results (raw data).
	- Made survey reports in summary form, for the different
	  question types.

Thu Jan  2 16:10:46 1997  Olof Runborg  <olofr@c2m2-12.nada.kth.se>

	* Ported SklaffKOM to Solaris systems.

	* Version 1.27, added surveys. New file: survey.c. Fixed
	a bug in edit.c; messages sent from within the editor were
	converted to lower case.

Sun Dec 22 14:28:16 1996  S|derKOM administration  <sklaff@skom.skom.se>

	* Reinvented the wheel. The cmd_answermsg() function didn't take
	into account that the found message could be one that you sent
	yourself. This I fixed in a version that I never released officially,
	so I can't blame anyone except myself. Anyways, here is 1.27.

Sun Dec 22 09:23:57 1996  Peter Lindberg  <peter@skom.skom.se>

	* Bunch of stuff added for surveys. Released as 1.26.

Sun Dec  8 17:35:54 1996  S|derKOM administration  <sklaff@skom.skom.se>

	* commands.c (cmd_read_last_text): Added this function which
	simply displays the 'last' read new text.

	* msg.c (display_msg): If the Presbeep flag is set, 'I' messages
	doesn't beep. This is due to a request from the impossible man,
	although the semantics for the flag is freaked out.
	Also made the list interruptible.

	* commands.c (cmd_answermsg): Fixed so that it answers to the
	right user, i.e. the one from which the LAST RECEIVED 'SAY' was
	from, not the last message regardless of type.

Sat Dec  7 21:20:37 1996  S|derKOM administration  <sklaff@skom.skom.se>

	* msg.c: Added a guard in list_mlist() so that max never is too
	high, which can cause enormous swapping.

	* Released versions 1.23 and 1.24. Added commands for displaying
	the last received and sent say/shout/I messages. Also extended
	the buffer so that it can 'remember' an unlimited number of
	messages. It makes the users happy.

Sun Nov 24 19:50:50 1996  S|derKOM administration  <sklaff@skom.skom.se>

	* Time to start all over. The old ChangeLog hadn't been updated
	for years. Anyway, I have now fixed the bug that made sklaff
	crash when requesting help for certain commands. Then I added
	the URL field in the user information and finally added the toy
	command "from". I also made some commands silent when used in
	the "login scripts".


19 Aug 1993	      * SklaffKOM v1.00 released.

20 Aug 1993		All "system" changed to "execl" for security
			reasons.  Minor cosmetic fixes.  New #defines
			in sklaff.h for program options.

21 Aug 1993		Wordwrap when in "say"-mode.

22 Aug 1993		Fixed bug in "unread tree" when text was moved
			from another conference.

23 Aug 1993		Fixed bug when compiling for BSD. Variable
			oldmask should be called oldsigmask. Several
			places. Changed add_active to look for dead
			users before adding self. Cleared msg-file at
			every login.

27 Aug 1993		Fixed bug in cmd_goto_text when text does not
			exist.

29 Aug 1993		Fixed bug i parse.c when two commands gave
			full hits. Fixed bug in edit.c concerning
			"move text".

30 Aug 1993		Fixed bug concering variable Last_text. Now
			it is changed only if the text exists. Also
			fixed bug in next_text, it had problem finding
			the right text if the next one was deleted.
			Fixed bug in editor, when changing a line you
			had one character less available on the line.

1 Sep 1993		Fixed bug in "resume_aborted_edit". Sometimes
			the text resumed was added to the wrong confernce.
			Added "ULTRIX"-define for compilation.

2 Sep 1993	      *	SklaffKOM v1.01 released.

4 Sep 1993	        Fixed bug in list_confs concering (F)-flag.

9 Sep 1993		Fixed bug i cmd_download, wildcards didn't work.

22 Sep 1993		Changed signal handling, suspects bug. Changed
			ULTRIX define to not equal LINUX. Changed length
			of say/yell messages to one character shorter.

30 Sep 1993		Changed getwd/getcwd compilation defines.

5 Oct 1993		Added cls before text flag.

10 Nov 1993		Fixed bug when redisplaying other peoples letters.

12 Nov 1993		Fixed textnumber check in cmd_unread_text.

28 Nov 1993		Comments no longer allowed i database-files.
			sscanf removed from buf.c and custom routines
			used instead.

2 Feb 1994              Added paydate to sklaffrc-struct.  Addes support
                        in sklaffadm-program to set paydate and some 
                        code in cmd_show_status, list_user, and some
                        added functionality in sklaffadm userlist.

xx Mar 1994	      *	Here a lot has happened, a zillion fixed during
                        the last month, a bunch on new commands and
                        support for news and email.  1.10 released.

9 March 1996		Well, I sort of forgot to update this file, but
                        a lot of bugfixes and some new commands. 1.11
			released.
